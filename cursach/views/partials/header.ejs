<header>
  <link rel="stylesheet" href="/css/style.css">

  <div class="logo" onclick="location.href='/'" style="cursor:pointer;">CarTrade</div>

  <nav style="display: flex; align-items: center; gap: 15px; position: relative;">
    <a href="/cars">–í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</a>

    <% if (typeof user !== 'undefined' && user) { %>
      <a href="/cars/new">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∞–≤—Ç–æ</a>
      <a href="/logout">–í—ã–π—Ç–∏</a>
    <% } else { %>
      <a href="/login">–í–æ–π—Ç–∏</a>
      <a href="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    <% } %>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π –ª—É–ø—ã -->
    <button id="search-toggle" aria-label="–ü–æ–∏—Å–∫" style="background:none; border:none; cursor:pointer; font-size:20px; margin-left: 10px;">
      üîç
    </button>

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
    <form id="search-form" method="GET" action="/cars" style="display:none; position: absolute; top: 40px; right: 0; background: #fff; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); z-index: 100;">
      <input
        type="text"
        name="brand"
        placeholder="–ú–∞—Ä–∫–∞"
        style="padding: 5px; width: 120px; margin-right: 5px;"
      />
      <input
        type="number"
        name="minPrice"
        placeholder="–¶–µ–Ω–∞ –æ—Ç"
        min="0"
        style="padding: 5px; width: 80px; margin-right: 5px;"
      />
      <input
        type="number"
        name="maxPrice"
        placeholder="–¶–µ–Ω–∞ –¥–æ"
        min="0"
        style="padding: 5px; width: 80px; margin-right: 5px;"
      />
      <button type="submit" style="padding: 5px 10px;">–ò—Å–∫–∞—Ç—å</button>
    </form>
  </nav>

  <script>
    const toggleBtn = document.getElementById('search-toggle');
    const searchForm = document.getElementById('search-form');

    toggleBtn.addEventListener('click', () => {
      if (searchForm.style.display === 'none' || searchForm.style.display === '') {
        searchForm.style.display = 'block';
        searchForm.querySelector('input[name="brand"]').focus();
      } else {
        searchForm.style.display = 'none';
      }
    });

    document.addEventListener('click', (e) => {
      if (!searchForm.contains(e.target) && !toggleBtn.contains(e.target)) {
        searchForm.style.display = 'none';
      }
    });
  </script>
</header>

